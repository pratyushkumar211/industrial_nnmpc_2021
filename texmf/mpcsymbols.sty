\RequirePackage{mathtools}
\RequirePackage{amssymb}

\newcommand{\tends}{\rightarrow}
\newcommand{\eqbyd}{\coloneqq}
\newcommand{\bydeq}{\eqqcolon}
\newcommand{\reals}{\bbR}
\newcommand{\co}{\text{co}}
\newcommand{\var}{\text{var}}
\newcommand{\cov}{\text{cov}}
% \newcommand{\norm}[1]{\left\| #1 \right\|}
\newcommand{\norm}[1]{\left| #1 \right|}
\newcommand{\normf}[1]{| #1 |} %% norm of fixed height bars
\newcommand{\smax}[1]{\left\| #1 \right\|}
\newcommand{\smaxf}[1]{\| #1 \|}
\newcommand{\abs}[1]{\left| #1 \right|}
\newcommand{\seq}[1]{\left(#1\right)}
\newcommand{\seqbr}[1]{\bigl(#1\bigr)} %% a line breakable sequence
\newcommand{\floor}[1]{\left \lfloor #1 \right \rfloor} %% to avoid mathtools
\newcommand{\Odd}{\text{O}}
\newcommand{\Even}{\text{E}}
\newcommand{\Eta}{H}
% \newcommand{\half}{\frac{1}{2}}
\newcommand{\half}{(1/2)}
\newcommand{\eps}{\varepsilon}


% Moritz's ch8 discrete additions
\newcommand{\BB}{\mathbf{B}}
%\newcommand{\uI}{{u_{\mathrm{I}}}}



\newcommand{\cB}{\mathcal{B}}
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cQ}{\mathcal{Q}}
\newcommand{\cR}{\mathcal{R}}
\newcommand{\cK}{\mathcal{K}}
\newcommand{\Ball}{\mc{B}}
%\newcommand{\Y}{\mathcal{Y}}
\newcommand{\Mu}{\mathcal{M}}
\newcommand{\calA}{\mathcal{A}}
\newcommand{\calB}{\mathcal{B}}
\newcommand{\calQ}{\mathcal{Q}}
\newcommand{\calR}{\mathcal{R}}
\newcommand{\calM}{\mathcal{M}}

\newcommand{\bbA}{\mathbb{A}}
\newcommand{\bbB}{\mathbb{B}}
\newcommand{\bbC}{\mathbb{C}}
\newcommand{\bbD}{\mathbb{D}}
\newcommand{\bbI}{\mathbb{I}}
\newcommand{\bbK}{\mathbb{K}}
\newcommand{\bbP}{\mathbb{P}}
\newcommand{\bbR}{\mathbb{R}}
\newcommand{\bbS}{\mathbb{S}}
\newcommand{\bbU}{\mathbb{U}}
\newcommand{\bbV}{\mathbb{V}}
\newcommand{\bbW}{\mathbb{W}}
\newcommand{\bbX}{\mathbb{X}}
\newcommand{\bbY}{\mathbb{Y}}
\newcommand{\bbZ}{\mathbb{Z}}
\newcommand{\bbN}{\mathbb{N}}
\newcommand{\bbXI}{\mathbb{XI}}

\newcommand{\Igeq}[1][0]{\bbI_{\geq #1}}

\newcommand{\bbPs}{\bbP_{\!s}} % Negative kern looks nicer.

%\newcommand{\zeroseq}{\mathbf{0}}
\newcommand{\bseq}{\mathbf{b}}
\newcommand{\cseq}{\mathbf{c}}
\newcommand{\dseq}{\mathbf{d}}
\newcommand{\eseq}{\mathbf{e}}
\newcommand{\useq}{\mathbf{u}}
\newcommand{\hseq}{\mathbf{h}}
\newcommand{\xseq}{\mathbf{x}}
\newcommand{\yseq}{\mathbf{y}}
\newcommand{\zseq}{\mathbf{z}}
\newcommand{\lseq}{\boldsymbol{\lambda}}
\newcommand{\wseq}{\mathbf{w}}
\newcommand{\vseq}{\mathbf{v}}
\newcommand{\omegaseq}{\boldsymbol{\omega}}
\newcommand{\kappaseq}{\boldsymbol{\kappa}}
\newcommand{\museq}{\boldsymbol{\mu}}
\newcommand{\nuseq}{\boldsymbol{\nu}}
\newcommand{\owseq}{\overline{\wseq}}
\newcommand{\ovseq}{\overline{\vseq}}
\newcommand{\oxseq}{\overline{\xseq}}
\newcommand{\txseq}{\tilde{\xseq}}
\newcommand{\tuseq}{\tilde{\useq}}
\newcommand{\twseq}{\tilde{\wseq}}
\newcommand{\tyseq}{\tilde{\yseq}}
\newcommand{\Xseq}{\mathbf{X}}
\newcommand{\admistU}{\tilde{\mc{U}}_N}
\newcommand{\talpha}{\tilde{\alpha}}

\newcommand{\admisU}{\check{\mc{U}}_N}
\newcommand{\admisZ}{\tilde{\mc{Z}}_N}

\newcommand{\what}{\hat{w}}
\newcommand{\xhat}{\hat{x}}
\newcommand{\dhat}{\hat{d}}
\newcommand{\ehat}{\hat{e}}
\newcommand{\zhat}{\hat{z}}
\newcommand{\Vhat}{\hat{V}}
\newcommand{\Zhat}{\hat{Z}}
\newcommand{\phat}{\hat{p}}
\newcommand{\yhat}{\hat{y}}
\newcommand{\vhat}{\hat{v}}
\newcommand{\nuhat}{\hat{\nu}}
\newcommand{\bbPhat}{\widehat{\bbP}}

\newcommand{\ualpha}{\underline{\alpha}}
\newcommand{\ubeta}{\underline{\beta}}
\newcommand{\usigma}{\underline{\sigma}}
\newcommand{\ugamma}{\underline{\gamma}}
\newcommand{\uDelta}{\underline{\Delta}}
\newcommand{\ua}{\underline{a}}
\newcommand{\uc}{\underline{c}}
\newcommand{\uf}{\underline{f}}
\newcommand{\ug}{\underline{g}}
\newcommand{\uh}{\underline{h}}
\newcommand{\un}{\underline{n}}
\newcommand{\uu}{\underline{u}}
\newcommand{\ux}{\underline{x}}
\newcommand{\uy}{\underline{y}}
\newcommand{\uz}{\underline{z}}
\newcommand{\uA}{\underline{A}}
\newcommand{\uB}{\underline{B}}
\newcommand{\uN}{\underline{N}}
\newcommand{\uV}{\underline{V}}

\newcommand{\orr}{\overline{r}}
\newcommand{\orho}{\overline{\rho}}
\newcommand{\oB}{\overline{B}}
\newcommand{\oQ}{\overline{Q}}
\newcommand{\oK}{\overline{K}}
\newcommand{\xbar}{\overline{x}}
\newcommand{\bbar}{\overline{b}}
\newcommand{\vbar}{\overline{v}}
\newcommand{\Pbar}{\overline{P}}
\newcommand{\oalpha}{\overline{\alpha}}
\newcommand{\obeta}{\overline{\beta}}
\newcommand{\ogamma}{\overline{\gamma}}
\newcommand{\olambda}{\overline{\lambda}}
\newcommand{\oa}{\overline{a}}
\newcommand{\oA}{\overline{A}}
\newcommand{\oC}{\overline{C}}
\newcommand{\oG}{\overline{G}}
\newcommand{\oH}{\overline{H}}
\newcommand{\og}{\overline{g}}
\newcommand{\ox}{\overline{x}}
\newcommand{\ow}{\overline{w}}
\newcommand{\ov}{\overline{v}}
\newcommand{\on}{\overline{n}}
\newcommand{\op}{\overline{p}}
\newcommand{\od}{\overline{d}}
\newcommand{\ove}{\overline{e}}
\newcommand{\oy}{\overline{y}}
\newcommand{\ou}{\overline{u}}
\newcommand{\ob}{\overline{b}}
\newcommand{\oP}{\overline{P}}
\newcommand{\ovr}{\overline{r}}
\newcommand{\os}{\overline{s}}
\newcommand{\oth}{\overline{\theta}}
\newcommand{\oDelta}{\overline{\Delta}}
\newcommand{\oc}{\overline{c}}
\newcommand{\oh}{\overline{h}}
\newcommand{\oV}{\overline{V}}
\newcommand{\of}{\overline{f}}
\newcommand{\oF}{\overline{F}}
\newcommand{\oz}{\overline{z}}
\newcommand{\osigma}{\overline{\sigma}}
\newcommand{\ophi}{\overline{\phi}}
\newcommand{\odelta}{\overline{\delta}}

\newcommand{\dhatseq}{\widehat{\dseq}}
\newcommand{\whatseq}{\widehat{\wseq}}
\newcommand{\vhatseq}{\widehat{\vseq}}
\newcommand{\xhatseq}{\widehat{\xseq}}
\newcommand{\wt}{\widehat{\theta}}

\newcommand{\tsigma}{\tilde{\sigma}}
\newcommand{\tilb}{\tilde{b}}
\newcommand{\tilr}{\tilde{r}}
\newcommand{\tbeta}{\tilde{\beta}}
\newcommand{\tuy}{\underset{\tilde{\phantom{yy}}}{y}}
\newcommand{\tuz}{\underset{\tilde{\phantom{zz}}}{z}}
\newcommand{\tf}{\tilde{f}}
\newcommand{\tl}{\tilde{\ell}}
\newcommand{\ta}{\tilde{a}}
\newcommand{\tc}{\tilde{c}}
\newcommand{\tk}{\tilde{k}}
\newcommand{\ts}{\tilde{s}}
\newcommand{\tg}{\tilde{g}}
\newcommand{\tH}{\tilde{H}}
\newcommand{\tV}{\tilde{V}}
\newcommand{\tK}{\tilde{K}}
\newcommand{\tPi}{\tilde{\Pi}}
\newcommand{\tZ}{\tilde{Z}}
\newcommand{\tgamma}{\tilde{\gamma}}
\newcommand{\tx}{\tilde{x}}
\newcommand{\ty}{\tilde{y}}
\newcommand{\tz}{\tilde{z}}
\newcommand{\tb}{\tilde{b}}
\newcommand{\tw}{\tilde{w}}
\newcommand{\tp}{\tilde{p}}
\newcommand{\tir}{\tilde{r}}
\newcommand{\tA}{\tilde{A}}
\newcommand{\tB}{\tilde{B}}
\newcommand{\tC}{\tilde{C}}
\newcommand{\tD}{\tilde{D}}
\newcommand{\tQ}{\tilde{Q}}
\newcommand{\tP}{\tilde{P}}
\newcommand{\tR}{\tilde{R}}
\newcommand{\tM}{\tilde{M}}
\newcommand{\tG}{\tilde{G}}
\newcommand{\tF}{\tilde{F}}
\newcommand{\tE}{\tilde{E}}
\newcommand{\te}{\tilde{e}}
\newcommand{\tL}{\tilde{L}}
\newcommand{\tu}{\tilde{u}}
\newcommand{\Co}{\mathcal{C}}
\newcommand{\Ob}{\mathcal{O}}
\newcommand{\tOb}{\tilde{\mathcal{O}}}

\newcommand{\No}{N_\text{o}}
\newcommand{\boldA}{\boldsymbol{A}}
\newcommand{\boldC}{\boldsymbol{C}}

\newcommand{\uiter}{\upsilon}
\newcommand{\buiter}{\boldsymbol\upsilon}


\newcommand{\rtot}{r_\text{tot}}
\newcommand{\Amat}{A}
\newcommand{\Pmat}{P}
\newcommand{\xvec}{x}
\newcommand{\mvec}{m}
\newcommand{\vvec}{v}
\renewcommand{\Re}{\text{Re}}
\renewcommand{\Im}{\text{Im}}
% \renewcommand{\Re}{\bbR}
% \renewcommand{\Im}{\bbI}
\newcommand{\lev}{\operatorname{lev}}
\newcommand{\erf}{\operatorname{erf}}
\newcommand{\tr}{\operatorname{tr}}
\newcommand{\rank}{\operatorname{rank}}
\newcommand{\eig}{\operatorname{eig}}
\newcommand{\diag}{\operatorname{diag}}
\newcommand{\cond}{\operatorname{cond}}
\newcommand{\ceil}{\operatorname{ceil}}
\newcommand{\cone}{\operatorname{cone}}
\newcommand{\aff}{\operatorname{aff}}
\newcommand{\sat}{\operatorname{sat}}
\newcommand{\epi}{\operatorname{epi}}
\newcommand{\cl}[1]{\overline{#1}}
\newcommand{\bphi}{\bar{\phi}}
\newcommand{\st}{\text{~such that~}}
\newcommand{\bkappa}{\bar{\kappa}}
\newcommand{\bmathbb}[1]{\bar{\mathbb{#1}}}
\newcommand{\bp}{\bar{p}}
\newcommand{\bz}{\bar{z}}
\newcommand{\bA}{\bar{A}}
\newcommand{\bB}{\bar{B}}
\newcommand{\bV}{\bar{V}}
\newcommand{\bc}{\bar{c}}
\newcommand{\bd}{\bar{d}}
\newcommand{\sstends}[1]{\stackrel{#1}{\tends}}
\newcommand{\inprod}[1]{\langle  #1  \rangle}
\newcommand{\utends}{\vspace{.2ex}{\xrightarrow[U]{}}}

%% David's commands here
%% check these against mine and remove duplicates
%%
\newcommand{\bb}{(\cdot)}
\def\mc{\mathcal}
\def\mbf#1{\mathbf{#1}}
\def\sat{\mathrm{sat}}
\def\proj{\mathrm{Proj}}
%\newcommand{\integers}{\mathbb{Z}_{\ge0}}
\def\ccdot{\,\cdot\,}
\def\bx{\bar{x}}
\def\bu{\bar{u}}
\def\bmbf#1{\bar{\mathbf{#1}}}
\def\tmbf#1{\tilde{\mathbf{#1}}}
%\newcommand{\tmbf}[1]{\widetilde{\boldmath #1}$}}
%\def\interior#1{\mathrm{int}({#1})}
\newcommand{\interior}[1]{\operatorname{int}(#1)}
\newcommand{\veps}{\varepsilon}
% \def\la#1{\label{eq:#1}}
% \def\re#1{(\ref{eq:#1})}
%\newenvironment{proof}{\paragraph{Proof}}{\endpf}
% \def\proof{\noindent{\normalsize\bf Proof:}}
% \def\endproof{$\hspace*{\fill}\proofbox$ \par}
%\newcommand{\proofbox}{\hfill\mbox{$\blacksquare$}}
\newcommand{\expe}{\mathcal{E}}

%% these are from ch5
\def\mb{\mathbb}
\def\bmc#1{\bar{\mc{#1}}}
\def\ba{\bar{a}}


% To be used in a subscript on partial derivatives:
%\newcommand{\twoconditions}[2]{{\scriptstyle{#1}\atop \scriptstyle{#2}}}
\newcommand{\twoconditions}[2]{%
\renewcommand{\arraystretch}{0.5}%
\begin{array}{c}\scriptstyle{#1}\\%
      \scriptstyle{#2} \end{array}}
%
%\newcommand{\threeconditions}[3]{%
%{{\scriptstyle{#1}\atop\scriptstyle{#2}}\atop\scriptstyle{#3}}}
\newcommand{\threeconditions}[3]{%
\renewcommand{\arraystretch}{0.5}%
\begin{array}{c}\scriptstyle{#1}\\ \scriptstyle{#2}\\
    \scriptstyle{#3}\end{array}} 
%
\newcommand{\messypartial}[3]{%
\left.\frac{\partial{#1}}{\partial{#2}}\right|_{#3}}
%
%then you could just write
% \[ A = \messypartial{f}{x}{\threeconditions{x=0}{u=0}{w=0}} \]
%
% some help for plotting symbols
%
\newcommand{\solidcircleplotmarker}{$\bullet$}
\newcommand{\opencircleplotmarker}{$\circ$}
%
% put arrows on plots
%
  \newcommand{\rotbtr}[1]{%
    \begin{rotate}{#1}{%
      \makebox[0pt][c]{$\blacktriangle$}}%
    \end{rotate}}

\newcommand{\eqsolref}[1]{(\solref{#1})}
% infp is for use with infp_{y\in Y} sup_{x\in X} to get vertical alignment
\newcommand{\infp}{\mathop{\rm\rlap{\phantom{p}}{inf}}}

\def\ess{\text{ess}}

% Moritz' additions

\newcommand{\R}{\reals}
\newcommand{\vecnorm}[1]{\left\| #1 \right\|}
\newcommand{\opt}{0}
\newcommand{\conti}{\mathrm{c}}
\newcommand{\fcont}{f_\conti}
\newcommand{\ellcont}{\ell_\conti}
\newcommand{\phicont}{\phi_\conti}
%\newcommand{\dd}{\mathrm{d}}
\newcommand{\dd}{d}
\newcommand{\dpartial}[2]{\frac{\partial{#1}}{\partial{#2}}}
\newcommand{\dtotal}[2]{\frac{\dd {#1}}{\dd {#2}}}
\newcommand{\steps}{\mathrm{steps}}
\newcommand{\cost}{\mathrm{cost}}
\newcommand{\sseq}{\mathbf{s}}
\newcommand{\qseq}{\mathbf{q}}
\newcommand{\Kseq}{\mathbf{K}}
\newcommand{\Sseq}{\mathbf{S}}
 
\newcommand{\mrm}[1]{\mathrm{#1}}
\newcommand{\fl}{{\mathrm{flat}}}
\newcommand{\lin}{{\mathrm{L}}}
\newcommand{\QP}{{\mathrm{QP}}}

\newcommand{\LL}{{\mathcal{L}}}
\newcommand{\NN}{{\mathcal{N}}}
\newcommand{\ZZ}{{\mathcal{Z}}}

%\newcommand{\matrixgeqstrict}{\succ}
%\newcommand{\matrixgeq}{\succeq}
\newcommand{\matrixgeqstrict}{>}
\newcommand{\matrixgeq}{\geq}

\newcommand{\exact}{\mathrm{ex}}
\newcommand{\GN}{\mathrm{GN}}
\newcommand{\reference}{\mathrm{ref}}
\newcommand{\KKT}{\mathrm{KKT}}

\newcommand{\equality}{\mathrm{eq}}
\newcommand{\inequality}{\mathrm{ineq}}

\newcommand{\activeset}{\bbA}
\newcommand{\inactiveset}{\bbI}

\newcommand{\traj}{{\mathrm{tr}}}

%% Commands added by Travis Arnold.
\RequirePackage{mathrsfs}
\newcommand{\Ys}{\mathscr{Y}}
\newcommand{\Rs}{\mathscr{R}}
\newcommand{\Os}{\mathscr{O}}
\newcommand{\As}{\mathscr{A}}
\newcommand{\bG}{\bar{G}}
\newcommand{\bw}{\bar{w}}
\newcommand{\bQ}{\bar{Q}}
\newcommand{\kron}{\otimes}
\newcommand{\vecc}{\operatorname{vec}}
